# Лексическая структура языка CPY 

## 1. **Примеры кода**

```cpy
func factorial:int(n:int)
{
    if (n <= 1)
    {
        return 1;
    }
    return n * factorial(n - 1);
}

func main:void()
{
    const message:str = "Факториал числа ";
    let number:int = 5;
    let result:int = factorial(number);
    
    print(number, " равен ", result);
}
```

---

## 2. **Ключевые слова** 

  Все ключевые слова **регистрозависимые**

| Категория       | Ключевые слова                        |
| --------------- | ------------------------------------- |
| Объявления      | `let`, `const`, `func`                |
| Типы            | `int`, `float`, `str`, `bool`, `void` |
| Управление      | `if`, `elif`, `else`, `for`, `while`  |
| Контроль потока | `break`, `continue`, `return`         |
| Логические      | `and`, `or`, `not`                    |
| Литералы        | `true`, `false`                       |
| Ввод-вывод      | `print`, `input`                      |

**Важно:** `func` = `FUNC` = `Func`, но `myFunc` != `myfunc`

**Примечание:** `and`, `or`, `not` являются одновременно ключевыми словами и операторами

---

## 3. **Идентификаторы**

* Должны начинаться с буквы `[a-zA-Z]` или `_`
* Могут содержать `[a-zA-Z0-9_]`
* Регистрозависимые
* Не могут совпадать с ключевыми словами

---

## 4. **Литералы**

### 4.1. **Литералы чисел**

* Целые числа: последовательность цифр [0-9]+
* Вещественные числа: [0-9]+\.[0-9]+
* Все числа записываются в десятичной системе
  
### 4.2. **Литералы строк**

* **Обрамляются только двойными кавычками:**
* **Внутри строки допускаются:**

    * Любые символы, кроме двойных кавычек "
    * Escape-последовательности:
  
      * `\n` - новая строка
      * `\t` - табуляция
      * `\\` - обратный слеш
      * `\"` - двойная кавычка

* **Символьные литералы не поддерживаются, все текстовые значения — строки**

---

## 5. **Операторы**

| Категория      | Операторы                                       |
| -------------- | ----------------------------------------------- |
| Арифметические | `+`, `-`, `*`, `/`, `%`, `//`, `**`, `++`, `--` |
| Присваивания   | `=`                                             |
| Сравнения      | `==`, `!=`, `<`, `>`, `<=`, `>=`                |
| Логические     | `and`, `or`, `not`                              |
| Тернарный      | `? :`                                           |

**Важно:**
* `++` и `--` - отдельные токены, могут быть как префиксными, так и постфиксными
* `-` и `+` - один токен для унарных и бинарных операций
* `**` - один токен (возведение в степень)
* `//` - один токен (целочисленное деление)

---

## 6. **Прочие лексемы**

* `;` - конец инструкции
* `,` - разделитель элементов
* `:` - разделитель типа
* `{}` - блоки кода
* `()` - вызов функций, группировка выражений,

### **Пробельные символы**
* Пробелы, табуляции и переводы строк игнорируются
* Используются только для разделения лексем
* Внутри строк сохраняются как есть

---

## 7. **Комментарии**

* **Однострочные комментарии:** начинаются с  `///`
* **Многострочные комментарии:** заключаются в `/* и */`

## 8. Формальное определение лексем (EBNF)

Базовые лексемы языка CPY могут быть формально описаны в нотации ISO EBNF:
```
(* === Основные лексемы === *)

literal = number | string | boolean;
number = integer | float ;
integer = digit, { digit } ;
float = digit, { digit }, ".", digit, { digit } ;
string = '"', { character - '"' | escape_sequence }, '"' ;
character = ? любой символ Unicode ? ;
escape_sequence = "\\", ( "\"" | "\\" | "n" | "t" ) ;
boolean = "true" | "false" ;
identifier = (letter | "_"), { letter | digit | "_" } ;
constant = "Pi" | "Euler" ;

letter = "A" | "B" | ... | "Z" | "a" | "b" | ... | "z" ;
digit = "0" | "1" | ... | "9" ;
```
