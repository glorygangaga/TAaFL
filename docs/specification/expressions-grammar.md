* Нужно описать грамматику выражений для своего языка программирования

#  Грамматика выражений языка

## 1. Общие принципы синтаксиса выражений

Выражения могут состоять из:

* **литералов** (числовых, строковых, булевых);
* **идентификаторов** и **вызовов функций**;
* **арифметических**, **сравнительных** и **логических операторов**;
* **операторов инкремента и декремента (`++`, `--`)**;
* **группирующих скобок** `()`;
* **операции доступа к полям** через `.` (точку);
* **оператора возведения в степень** `**`, `^`;
* **унарных операторов** `+`, `-`, `not`;
* **операции присваивания** `=`;
* **оператора указания типа** `:` (в объявлениях, не внутри выражений)
* **констант**

---

##  2. Операторы

### Арифметические операторы

| Символ    | Описание                    |
| :-------- | :-------------------------- |
| `+`       | сложение или унарный плюс   |
| `-`       | вычитание или унарный минус |
| `*`       | умножение                   |
| `/`       | деление                     |
| `//`      | деление без остатка         |
| `%`       | остаток от деления          |
| `**`, `^` | возведение в степень        |

---

### Операторы инкремента и декремента
| Символ | Описание                            |
| :----- | :---------------------------------- |
| `++`   | увеличение значения переменной на 1 |
| `--`   | уменьшение значения переменной на 1 |

```
++i;   // префиксный инкремент
i++;   // постфиксный инкремент
--j;   // префиксный декремент
j--;   // постфиксный декремент
```
  
---

### Операторы сравнения

| Символ | Описание         |
| :----- | :--------------- |
| `==`   | равно            |
| `!=`   | не равно         |
| `<`    | меньше           |
| `>`    | больше           |
| `<=`   | меньше или равно |
| `>=`   | больше или равно |

---

### Логические операторы

| Символ | Описание             |
| :----- | :------------------- |
| `and`  | логическое И         |
| `or`   | логическое ИЛИ       |
| `not`  | логическое отрицание |

---

### Прочие операторы

| Символ | Описание                            |
| :----- | :---------------------------------- |
| `.`    | доступ к полю структуры или объекта |
| `()`   | вызов функции или группировка       |
| `[]`   | индексирование массива              |
| `=`    | присваивание                        |
| `:`    | указание типа (в объявлениях)       |

---

##  3. Приоритет и ассоциативность операторов

| Приоритет (высокий → низкий) | Операторы                              | Ассоциативность |
| :--------------------------- | :------------------------------------- | :-------------- |
| 1                            | `()` `[]` `.`                          | слева           |
| 2                            | постфиксные `++`, `--`                 | слева           |
| 3                            | префиксные `++`, `--`, `+`, `-`, `not` | справа          |
| 4                            | `**`, `^`                              | справа          |
| 5                            | `*`, `/`, `%`                          | слева           |
| 6                            | `+`, `-`                               | слева           |
| 7                            | `<`, `>`, `<=`, `>=`                   | слева           |
| 8                            | `==`, `!=`                             | слева           |
| 9                            | `and`                                  | слева           |
| 10                           | `or`                                   | слева           |
| 11                           | `=`                                    | справа          |


---

## 4. Встроенные функции для чисел

| Имя              | Описание                        |
| ---------------- | ------------------------------- |
| `abs(x)`         | модуль числа                    |
| `min(a, b, ...)` | минимальное значение            |
| `max(a, b, ...)` | максимальное значение           |
| `pow(a, b)`      | возведение в степень            |
| `round(x)`       | округление до ближайшего целого |
| `ceil(x)`        | округление вверх                |
| `floor(x)`       | округление вниз                 |

**Числовые константы:**

* `Pi` (3.14159265358)
* `Euler` (2.71828182846)

---

## 5. Текстовое описание синтаксиса выражений

1. **Простые выражения** состоят из:

   * литералов (`5`, `"text"`, `true`),
   * идентификаторов (`x`, `value`),
   * вызовов функций (`abs(x)`, `pow(a, b)`).

2. **Сложные выражения** формируются с помощью бинарных операторов:

   ```
   a + b * 3
   (x - 2) ** 2
   ```

3. **Унарные операции** применяются к выражению справа:

   ```
   -x
   not flag
   ```

4. **Функциональные вызовы** могут быть вложенными:

   ```
   print(abs(x - y))
   ```

5. **Присваивание** — выражение с правой ассоциативностью:

   ```
   a = b = 10;
   ```

6. **Скобки** меняют приоритет:

   ```
   (a + b) * c
   ```

---

## 6. Грамматика выражений (в нотации ISO EBNF)

(* ======== Основные лексемы ======== *)

identifier   = letter, { letter | digit | "_" } ;
number       = digit, { digit }, [ ".", digit, { digit } ] ;
string = '"', { character - '"' | escapeSequence }, '"' ;
character = ? любой символ Unicode ? ;
escapeSequence = "\\", ( "\"" | "\\" | "n" | "t" ) ;
boolean      = "true" | "false" ;

letter       = "A" | "B" | ... | "Z" | "a" | "b" | ... | "z" | "_" ;
digit        = "0" | "1" | ... | "9" ;

(* ======== Первичные выражения ======== *)

primary_expr =
      identifier
    | number
    | string
    | boolean
    | "Pi"
    | "Euler"
    | "(", expression, ")" ;

(* ======== Постфиксные выражения ======== *)

postfix_expr =
      primary_expr,
      { 
          ( "(" , [ argument_list ], ")" )        
        | ( ".", identifier )                   
        | ( "[", expression, "]" )                
        | ( "++" | "--" )                        
      } ;

argument_list =
      expression, { ",", expression } ;

(* ======== Унарные и бинарные выражения ======== *)

unary_expr =
      [ "++" | "--" | "+" | "-" | "not" ], unary_expr
    | postfix_expr ;

power_expr =
      unary_expr, { ("**" | "^"), unary_expr } ;

term_expr =
      power_expr, { ("*" | "/" | "%" | "//"), power_expr } ;

arith_expr =
      term_expr, { ("+" | "-"), term_expr } ;

comparison_expr =
      arith_expr, { ("<" | ">" | "<=" | ">="), arith_expr } ;

equality_expr =
      comparison_expr, { ("==" | "!="), comparison_expr } ;

and_expr =
      equality_expr, { "and", equality_expr } ;

or_expr =
      and_expr, { "or", and_expr } ;

assignment_expr =
      or_expr, [ "=", assignment_expr ] ;

expression =
      assignment_expr ;
