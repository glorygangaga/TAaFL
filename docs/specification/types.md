# Семантика типов данных 

nova поддерживает строгую статическую типизацию с тремя основными типами данных:
1. **Целые числа (int)** — 32-битные знаковые целые числа
2. **Булев тип (bool)** — логические значения `true` и `false`
3. **Строковый тип (str)** — строки символов в кодировке UTF-8

Дополнительные типы:
- **Вещественные числа (float)** —  64-битные числа с плавающей точкой (IEEE 754 binary64)
- **Пустой тип (void)** — отсутствие значения (только для возвращаемого типа функций)

**Ключевые принципы:**
- Все типы определяются на этапе компиляции
- Неявные преобразования между типами запрещены
- Каждая переменная должна быть явно типизирована при объявлении
- Операции проверяются на совместимость типов

## Литералы

### Целые числа (int)
```nova
42          // положительное целое
-17         // отрицательное целое
0           // ноль
2147483647  // максимальное 32-битное знаковое целое
-2147483648 // минимальное 32-битное знаковое целое
```

**Ограничения:**
- Диапазон: от -2^31 до 2^31-1 (-2,147,483,648 до 2,147,483,647)
- Только десятичная система счисления
- Подчеркивания для разделения разрядов не поддерживаются

### Булев тип (bool)
```nova
true   // логическая истина
false  // логическая ложь
```

### Строковый тип (str)
```nova
"Hello, World!"        // простая строка
""                     // пустая строка
"Line 1\nLine 2"       // строка с управляющими символами
"Значение: 42"         // строки с Unicode
```

**Escape-последовательности:**
- `\n` — новая строка
- `\t` — табуляция
- `\\` — обратный слеш
- `\"` — двойная кавычка

**Вещественные числа (float)**
```nova

3.14     // положительное вещественное число
-2.5     // отрицательное вещественное число
0.0      // ноль
```
**Формат: IEEE 754 binary64 (double precision)**
- Диапазон: примерно от 5.0 × 10⁻³²⁴ до 1.7 × 10³⁰⁸
- Точность: около 15-17 десятичных цифр

## Операторы

### Арифметические операторы
**Для int и float:**
```nova
let a:int = 10 + 5;    // сложение: 15
let b:int = 10 - 3;    // вычитание: 7
let c:int = 6 * 7;     // умножение: 42
let d:int = 10 / 3;    // целочисленное деление: 3
let e:int = 10 % 3;    // остаток от деления: 1
let f:int = 10 // 3;   // целочисленное деление: 3
let g:float = 2 ** 3;  // возведение в степень: 8.0
```

**Особенности:**
- Операции между int и float требуют явного преобразования
- Деление `/` для целых чисел возвращает целую часть
- Оператор `//` эквивалентен `/` для целых чисел

### Операторы сравнения
**Для int float:**
```nova
5 == 5     // true
5 != 3     // true
5 < 10     // true
5 > 3      // true
5 <= 5     // true
5 >= 5     // true
```

**Для bool:**
```nova
true == true   // true
true != false  // true
```

**Для str:**
```nova
"abc" == "abc"  // true (лексикографическое сравнение)
"abc" != "def"  // true
"abc" < "def"   // true 
```

### Логические операторы
**Только для bool:**
```nova
true and false   // false
true or false    // true
not true         // false
```

**Short-circuit evaluation:**
- `and` — если левый операнд `false`, правый не вычисляется
- `or` — если левый операнд `true`, правый не вычисляется

### Строковые операторы
```nova
let s:str = "Hello, " + "World!";  // конкатенация: "Hello, World!"
```

**Ограничения:**
- Конкатенация только между строками
- Другие типы требуют явного преобразования в строку

### Операторы инкремента/декремента
**Только для int:**
```nova
let x:int = 5;
x++;      // x становится 6, возвращает 5 (постфиксный)
++x;      // x становится 7, возвращает 7 (префиксный)
x--;      // x становится 6, возвращает 7 (постфиксный)
--x;      // x становится 5, возвращает 5 (префиксный)
```

## Переменные

### Объявление переменных
Тип переменной обязателен при объявлении:
```nova
let count:int = 42;           // переменная целого типа
const PI:float = 3.14159;     // константа вещественного типа
let flag:bool = true;         // переменная логического типа
let name:str = "Alice";       // переменная строкового типа
```

### Присваивание
Тип переменной нельзя изменить после объявления:
```nova
let x:int = 5;
x = 10;           // допустимо: тот же тип
// x = "текст";   // ошибка компиляции: несовместимые типы
```

### Константы
```nova
const MAX_SIZE:int = 100;
// MAX_SIZE = 200;  // ошибка компиляции: константу нельзя изменить
```

## Преобразования типов

### Явные преобразования
Неявные преобразования запрещены. 

!Дальше надо подумать, и согласовать с разработчиком и преподавателем!
Используйте встроенные функции:

```nova
let num:int = 42;
let text:str = toString(num);     // int → str: "42"

let s:str = "123";
let n:int = toInt(s);             // str → int: 123

let f:float = 3.14;
let i:int = toInt(f);             // float → int: 3 (отбрасывание дробной части)

let b:bool = true;
let s2:str = toString(b);         // bool → str: "true"

let s3:str = "false";
let b2:bool = toBool(s3);         // str → bool: false
```

### Правила преобразования
1. `toInt(str)` — преобразует строку в целое число
   - Успешно: "123" → 123
   - Ошибка: "abc" → ошибка выполнения

2. `toFloat(str)` — преобразует строку в вещественное число
   - Успешно: "3.14" → 3.14
   - Ошибка: "abc" → ошибка выполнения

3. `toBool(str)` — преобразует строку в логическое значение
   - "true" (без учета регистра) → true
   - "false" (без учета регистра) → false
   - Другие значения → ошибка выполнения

4. `toBool(int/float)` — преобразует число в логическое значение
   - 0 или 0.0 → false
   - Любое другое число → true

## Встроенные функции для работы с типами

### Числовые функции
```nova
abs(-5)            // 5 (модуль числа)
min(3, 5, 1)       // 1 (минимум)
max(3, 5, 1)       // 5 (максимум)
pow(2, 3)          // 8 (2 в степени 3)
round(3.6)         // 4 (округление)
ceil(3.2)          // 4 (округление вверх)
floor(3.8)         // 3 (округление вниз)
```

### Строковые функции
```nova
length("Hello")          // 5 (длина строки)
substring("Hello", 1, 3) // "ell" (подстрока с 1 по 3 индекс)
contains("Hello", "ell") // true (содержит подстроку)
startsWith("Hello", "He") // true (начинается с)
endsWith("Hello", "lo")   // true (заканчивается на)
toLower("Hello")         // "hello" (нижний регистр)
toUpper("Hello")         // "HELLO" (верхний регистр)
trim("  Hello  ")        // "Hello" (удаление пробелов)
indexOf("Hello", "l")    // 2 (первое вхождение)
lastIndexOf("Hello", "l") // 3 (последнее вхождение)
replace("Hello", "l", "p") // "Heppo" (замена)
split("a,b,c", ",")      // ["a", "b", "c"] (разделение)
```

### Функции преобразования типов
```nova
toString(42)       // "42" (int → str)
toString(3.14)     // "3.14" (float → str)
toString(true)     // "true" (bool → str)

toInt("123")       // 123 (str → int)
toInt(3.99)        // 3 (float → int)

toFloat("3.14")    // 3.14 (str → float)
toFloat(5)         // 5.0 (int → float)

toBool("true")     // true (str → bool)
toBool(1)          // true (int → bool)
toBool(0)          // false (int → bool)
```

### Проверка типов
```nova
isInt("123")       // false (строка не является int)
isInt(123)         // true
isFloat(3.14)      // true
isBool(true)       // true
isStr("text")      // true
```

---
